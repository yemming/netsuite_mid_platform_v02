# eAI Tech 系統克隆版 - 軟體需求規格書 (SRS)

## 1.0 緒論

### 1.1 專案目的

本專案旨在「克隆」並「現代化」一份基於《漢門科技_ERP_MES_Iot_BI服務能量介紹.pdf》文件（後稱「原系統」）所揭示的整合性企業管理平台。

我們的目標不是 1:1 複製其過時的 WinForms 介面，而是要**完整重現其核心業務邏G輯、資料模型、作業流程與決策洞察**，並將其部署在一個高效、可擴展的現代技術棧上。

### 1.2 目標技術棧

* **前端 (Frontend):** Next.js (搭配 Shadcn/ui 或同等組件庫)
* **後端 & 資料庫 (Backend & DB):** Supabase
* **自動化 & RPA (Automation):** n8n

### 1.3 📌 AI 開發者核心指南

> **[ AI 核心指令 ]**
>
> **你的任務**：你將扮演一個全端開發 AI，本文件是你的唯一需求來源 (Single Source of Truth)。
>
> 1.  **視覺規範 (Design System)**：你 *必須* 嚴格遵循 `2.0 總體設計規範`。所有前端組件的樣式、顏色、佈局均以此為準。**特別注意**：所有表單輸入框均需複製其「**淡黃色背景**」 (Page 13, 16)。所有 BI 儀表板均需複製其「**高對比/深色主題**」 (Page 66, 68)。
> 2.  **資料庫 (Database)**：你 *必須* 嚴格遵循 `3.1 核心資料庫設計 (Page 6, 8)`。這張圖是本專案 Supabase 資料庫的 **E-R Diagram (實體關聯圖)**。所有 Table (資料表) 的建立與 Foreign Key (外鍵) 關聯，*必須* 1:1 複製此圖。
> 3.  **核心流程 (Core Logic)**：你 *必須* 嚴格遵循 `4.0 MES`, `6.0 WMS` 和 `8.0 RPA` 中描述的作業流程圖 (Page 12, 41, 47, 74, 79)。這些是 n8n 自動化流程的設計藍圖。
> 4.  **組件復用**：在開發 Next.js 畫面時， *必須* 優先從 `2.3 核心組件` 中選用已定義的組件 (如表單、表格、BI 圖表) 來建構頁面。

---

## 2.0 總體設計規範 (Global Design Specification)

本節定義了系統的全局視覺風格，所有前端開發 *必須* 遵守。

### 2.1 色彩規範 (Color Palette)

| 用途 | 顏色 (描述性) | 十六進位 (參考) | 來源頁面 |
| :--- | :--- | :--- | :--- |
| 主題色 (Header, Icon) | 漢門企業藍 (Corporate Blue) | `~#007bff` | Page 1, 13, 15 |
| **模組色 - 財務** | **會計綠 (Teal Green)** | `~#4CAF50` | **Page 6** |
| **模組色 - 製造** | **製造藍 (Royal Blue)** | `~#2196F3` | **Page 6** |
| **模組色 - 營銷** | **營銷紅 (Coral Red)** | `~#F44336` | **Page 6** |
| **模組色 - 人資** | **人資灰 (Slate Gray)** | `~#607D8B` | **Page 6** |
| **模組色 - MES** | **MES 紫 (Deep Purple)** | `~#9C27B0` | **Page 6** |
| **狀態 - 正常/運行** | **運行綠 (Light Green)** | `~#8BC34A` | Page 22, 23 |
| **狀態 - 異常/逾期** | **異常紅 (Warning Red)** | `~#FF5722` | Page 22, 23 |
| **狀態 - 維修/試車** | **維修黃 (Warning Yellow)** | `~#FFC107` | Page 22, 23 |
| **狀態 - 停機/未排** | **停機灰 (Disabled Gray)** | `~#BDBDBD` | Page 22, 23 |
| **UI - 輸入框背景** | **輸入黃 (Input Yellow)** | `~#FFFFE0` | **Page 13, 16** |
| **UI - BI 儀表板背景**| **儀表板黑 (Dark Mode)** | `~#222733` | Page 66, 68 |

### 2.2 介面佈局 (UI Layout)

* **原系統風格 (WinForms Legacy)**：(Page 13, 16, 31, 42)
    * 頂部為 `標題列` (e.g., "漢益康集團-漢門科技股份有限公司")。
    * 標題列下方為 `圖標工具欄` (e.g., "搜尋F", "新增", "刪除", "列印" - 見 Page 43, 44)。
    * 主內容區域為 `MDI 視窗` 或 `頁籤`。
* **克隆版風格 (Next.js Modern)**：
    * **頂層佈局**：使用 `Sidebar` (側邊導航欄) + `Header` (頂部狀態欄) + `Main Content` (主內容區) 的現代佈局。
    * **Sidebar**：用於在 `ERP`, `MES`, `SCM`, `WMS`, `IoT BI` 等六大模組間切換。
    * **Header**：顯示使用者資訊、系統通知、警示 (Page 144)。
    * **Main Content**：用於渲染選定的功能畫面。**其內部的表單/表格佈局需嚴格複製原系統。**

### 2.3 核心組件 (Core Components)

#### 2.3.1 組件: 表單 (Forms)

* **來源**：Page 13, 15, 16, 18, 19, 31-39
* **核心樣式**：
    * **輸入框 (Input / Textarea)**：背景色 *必須* 為「輸入黃」(`~#FFFFE0`)。
    * **標籤 (Label)**：*必須* 位於輸入框的左側或正上方。
    * **佈局**：使用 Grid 或 Flex 佈局，嚴格對齊標籤和輸入框。
* **子組件**：
    * **日期選擇器 (Date Picker)**：(Page 15, 16) 需包含一個可點擊的日曆圖標。
    * **下拉選單 (Select / Dropdown)**：(Page 17) 用於選擇機台代號等。
    * **單選/複選框 (Radio/Checkbox)**：(Page 16, 33) 用於 `確認否`, `製程完工`, `新增/核准/結案` (Page 43)。
    * **按鈕 (Button)**：(Page 18, 20) `執行`, `中斷執行`, `查看紀錄`。

#### 2.3.2 組件: 資料表格 (Data Grids / Tables)

* **來源**：Page 13, 14, 16, 17, 31, 44, 45
* **核心樣式**：
    * **斑馬紋 (Zebra Striping)**：表格行 *必須* 有交錯的背景色 (白/灰)。
    * **表頭 (Header)**：*必須* 是固定的 (Sticky)，背景色需加深，文字置中。
    * **功能**：*必須* 支持點擊表頭進行排序。
* **佈局模式**：
    * **主從式 (Master-Detail)**：(Page 16, 19) 上方為一個 `Data Grid` (主)，下方為另一個 `Data Grid` (從)，點擊上方表格的行，會刷新下方表格的內容。
    * **查詢結果式 (Query-Result)**：(Page 17) 上方為一個 `Form` (查詢條件)，下方為一個 `Data Grid` (查詢結果)。

#### 2.3.3 組件: BI 儀表板 (BI Dashboards)

* **來源**：Page 57, 59, 66, 67, 68
* **核心樣式**：
    * **主題**：*必須* 採用高對比/深色主題 (Dark Mode)，背景色為 `儀表板黑` (`~#222733`)。
    * **字體**：*必須* 使用明亮、清晰的字體顏色 (白、淺綠、淺藍)。
    * **佈局**：*必須* 使用響應式網格 (Tiled Grid) 佈局，確保組件對齊。
* **子組件 (需使用 Chart.js, D3, Recharts 等庫實現)**：
    * **KPI 卡片 (KPI Card)**：(Page 66, 68) 顯示一個大數字和一個標題 (e.g., "至今逾期未交量: 622")。
    * **儀表盤 (Gauge Chart)**：(Page 59, 64) 顯示百分比 (e.g., "100%") 或數值。
    * **甜甜圈圖 (Donut Chart)**：(Page 57, 59) 顯示設備狀態分佈。
    * **長條圖 (Bar Chart)**：(Page 66, 68) 顯示稼動率、負載量。
    * **狀態網格 (Status Grid)**：(Page 67) 一系列方格，每個方格代表一台機器，並根據狀態顯示不同顏色。
    * **警示框 (Alert Box)**：(Page 67) 當有「機台異常提醒」時，*必須* 彈出或顯示一個高亮 (紅色) 的警示組件。

#### 2.3.4 組件: 流程圖 (Flowcharts)

* **來源**：Page 6, 8, 12, 27, 28, 41, 47, 74, 79
* **核心樣式**：
    * **節點 (Node)**：*必須* 是圓角矩形 (Rounded Rectangle)。
    * **顏色**：節點的顏色 *必須* 嚴格遵守 `2.1 色彩規範` 中的模組色 (e.g., 財務=綠, MES=紫)。
    * **連接線 (Connector)**：*必須* 是帶有箭頭的直線或直角線。
* **實現**：在 Next.js 中應使用 `Mermaid.js` 或 `React Flow` 庫來動態渲染這些流程圖。

---

## 3.0 ERP 企業資源規劃 (大腦)

### 3.1 📍 核心資料庫設計 (Supabase E-R Diagram)

* **核心指令**：**Page 6 (`漢門科技ERP/MES全系統關聯圖`) 是本系統 Supabase 資料庫的 E-R 圖。**
* **資料表 (Tables)**：*必須* 根據圖中的每一個「方塊」建立一個資料表。
    * **範例 Tables**：`Orders` (訂單管理), `BOM` (用料結構), `Items` (基礎資料), `MO` (製令管理), `PO` (採購管理), `Inventory` (庫存管理), `AR_Invoices` (發票管理), `AR_Payments` (應收帳款), `AP_Bills` (應付帳款), `GL_Journal` (總帳會計), `Employees` (人事管理), `Payroll` (薪資管理), `Machines` (設備保養維修) ...
* **外鍵關聯 (Foreign Keys)**：*必須* 根據圖中的「**箭頭**」建立外鍵關聯。
    * **範例關聯**：
        * `Orders` (訂單) -> `MO` (製令): 訂單觸發製令。
        * `MO` (製令) -> `PO` (採購): 製令缺料觸發採購。
        * `MO` (製令) -> `Inventory` (庫存): 製令領料/完工入庫。
        * `Shipping` (出貨) -> `AR_Invoices` (發票): 出貨觸發開票。
        * `AR_Invoices` (發票) -> `AR_Payments` (應收): 發票觸發收款。
        * ... 依此類推，複製圖上所有關聯。

### 3.2 財務模組 (Financials)

* **畫面清單 (來源: Page 6)**：總帳會計, 會計界面, 應收帳款, 應付帳款, 票據現金, 開票管理, 固定資產, 成本管理。

### 3.3 營銷模組 (Sales)

* **畫面清單 (來源: Page 6)**：報價管理, 訂單管理, 出貨管理, 發票管理。

### 3.4 製造模組 (Manufacturing)

* **畫面清單 (來源: Page 6)**：用料結構 (BOM), 生產規劃, 製令管理, 製程管理, 委外管理。

### 3.5 採購庫存模組 (Procurement & Inventory)

* **畫面清單 (來源: Page 6)**：採購管理, 庫存管理。

### 3.6 人資模組 (HR)

* **畫面清單 (來源: Page 6)**：刷卡管理, 人事管理, 薪資管理。

---

## 4.0 MES 製造執行系統 (神經)

### 4.1 有限產能排程 (FCS)

* **來源**：Page 11-24
* **核心流程 (n8n + Next.js)**：*必須* 遵照 Page 12 (`有限產能排程系統作業流程圖`) 的邏輯。

#### 4.1.1 畫面: 資源型態維護 (Page 13)

* **UI**：一個標準 `Form` (型態代號, 型態名稱) + 一個 `Data Grid` (資源代號, 資源名稱, ...)。
* **樣式**：Form 輸入框 *必須* 是「輸入黃」。Grid *必須* 有斑馬紋。

#### 4.1.2 畫面: 資源資料維護 (Page 14)

* **UI**：一個全螢幕的 `Data Grid`。
* **樣式**：Grid *必須* 有斑馬紋。

#### 4.1.3 畫面: 機台行事曆維護 (Page 15)

* **UI**：
    * 左上方 `Form`：用於過濾 (機台代號, 年月)。
    * 右上方 `Form`：設定「行事曆工作時數」(星期日~星期六)。
    * 下方 `Data Grid`：一個月曆型網格，顯示每日的「工作時數」和「每日產能」。
* **樣式**：所有輸入框 (e.g., `8.0000`) *必須* 是「輸入黃」。

#### 4.1.4 畫面: 製令單轉排程規劃 (Page 16)

* **UI**：**主從式 (Master-Detail) 佈局**。
    * 上方 `Form`：過濾條件 (訂單號碼, 預計出貨日)。
    * 中間 `Data Grid` (Master)：顯示符合條件的「製令單」。*必須* 有一個 `確認否` 的 Checkbox。
    * 下方 `Data Grid` (Detail)：顯示選中製令單的「製程明細」。
* **樣式**：輸入框 *必須* 是「輸入黃」。

#### 4.1.5 畫面: 工單機台生產順序設定 (Page 17)

* **UI**：
    * 左側 `List`：顯示機台 (e.g., "F24-01", "F24-02")。
    * 右側 `Data Grid`：顯示選中機台的「工單隊列」。
* **功能**：*必須* 允許使用者調整 Grid 中「優先順序」欄位的數值，或通過拖拉 (Drag-and-Drop) 改變工單順序。

#### 4.1.6 畫面: 需求規劃處理 (Page 18)

* **UI**：一個簡單的 `Form`。
* **欄位**：`規劃起始日期` (Date Picker), `處理方式` (Radio Button), `執行` (Button)。

#### 4.1.7 畫面: 生管令單/現場令單調整 (Page 19, 21)

* **UI**：**主從式 (Master-Detail) 佈局**。
* **功能**：(Page 21) *必須* 允許「剪下」、「刪除」工單，以實現插單和調整。

#### 4.1.8 畫面: 機台現況查詢 (Page 22)

* **UI**：**狀態網格 (Status Grid)**。
* **功能**：*必須* 顯示多個方塊，每個方塊代表一台機台 (e.g., "DS-01", "F10-01")。
* **樣式**：方塊的顏色 *必須* 根據機台狀態而改變，並符合 `2.1 色彩規範` (綠=生產中, 黃=試車, 紅=異常, 灰=未排產)。

#### 4.1.9 畫面: 機台排程狀況查詢 (Page 23)

* **UI**：**甘特圖 (Gantt Chart) 形式**。
* **功能**：*必須* 顯示一個 `Data Grid`，其中「行」為機台，「列」為日期 (02/03, 02/04...)。
* **樣式**：表格中的儲存格 *必須* 根據狀態使用不同顏色 (e.g., `生產如期完工`=綠, `生產逾期`=紅)。

### 4.2 現場報工 (SFC)

* **來源**：Page 25-39
* **核心流程 (n8n + Next.js)**：*必須* 遵照 Page 27 (廠內) 和 Page 28 (委外) 的流程圖。

#### 4.2.1 畫面: 機台工作日誌維護 (Page 31)

* **UI**：`Form` (組別, 工作日期) + `Data Grid` (機台代號, 開工時間, 結束時間...)。
* **功能**：點擊 `生產數據` 按鈕 *必須* 彈出一個 Modal 或子視窗，顯示該機台的「工令條碼」和「產能」。

#### 4.2.2 畫面: 機台改停機維護 (Page 32)

* **UI**：`Form` (發生日期, 組別) + `Data Grid` (機台代號, 開始時間, 結束時間, 停機類別, 停機原因)。

#### 4.2.3 畫面: 現場報工登錄 (Page 33)

* **UI**：**核心報工畫面**。一個複雜的 `Form`。
* **欄位**：*必須* 包含所有欄位 (工令條碼, 報工日期, 製令單號, 線材料號, 線材批號, 機台代號, 總重, 桶重, 實際重量, 數量, ...)。
* **多語言**：*必須* 支持多語言 (介面顯示了中文與越南文)。

#### 4.2.4 畫面: 現場檢驗登錄 (Page 35)

* **UI**：`Form` (檢驗日期, 工令條碼, 檢驗內容...) + `Data Grid` (檢驗項目, 標準值, 檢驗值1-10)。

### 4.3 模具管理 (Mold Management)

* **來源**：Page 40-45
* **核心流程 (n8n + Next.js)**：*必須* 遵照 Page 41 (`模具管理系統作業流程圖`)。

#### 4.3.1 畫面: 模具基本資料維護 (Page 42)

* **UI**：`Form` (模具代號, 名稱, 規格) + `Tabs` (模具基本資料, 附件, 圖文, 製作用材)。
* **樣式**：*必須* 實現頁籤 (Tabs) 切換功能。

#### 4.3.2 畫面: 模具狀況/交易明細查詢 (Page 43, 44)

* **UI**：`Form` (查詢條件) + `Data Grid` (查詢結果)。
* **樣式**：*必須* 包含一個 `圖標工具欄` (搜尋, 列印, 首筆, 上筆, 下筆, 末筆)。

### 4.4 品質檢驗 (Quality Control - QC)

* **來源**：Page 46-51
* **核心流程 (n8n + Next.js)**：*必須* 遵照 Page 47 (`品質檢驗系統作業流程圖`)。

#### 4.4.1 畫面: 料品檢驗標準資料建立 (Page 48)

* **UI**：**主從式 (Master-Detail) 佈局**。
* **Master**：`Form` (料品代號, 名稱)。
* **Detail**：`Data Grid` (序號, 檢驗項目, 標準值, 最小值, 最大值...)。
* **樣式**：*必須* 有「成品檢驗」、「製程檢驗」、「接收檢驗」等 `Tabs`。

#### 4.4.2 畫面: 各類檢驗資料維護/審核 (Page 49, 50)

* **UI**：`Form` (單號, 料號...) + `Data Grid` (檢驗項目, 標準值, 實測值, 判定)。
* **功能**：*必須* 有「總判定」 (合格/不合格) 的 Radio Button 和「品保主管」的簽核欄位。

---

## 5.0 SCM 供應鏈管理 (血脈)

* **來源**：Page 70-72
* **系統架構 (System Design)**：*必須* 遵照 Page 70 和 71 的「中心廠-衛星廠」架構。
* **核心**：這是一個 B2B 供應商入口網站 (Supplier Portal)。
* **n8n 流程**：
    * **PUSH**：(n8n) 當中心廠 (Supabase) `PO` (採購單) 狀態為「已核准」，自動 PUSH 資料到 SCM 雲資料表。
    * **PULL**：(Next.js) 衛星廠 (供應商) 登入 Next.js 應用，PULL (查詢) 屬於自己的訂單。
    * **PUSH-BACK**：(Next.js) 供應商在前端回填「交期」、「出貨通知 (ASN)」，資料 PUSH 回 SCM 雲，(n8n) 再同步回中心廠 Supabase。

### 5.1 畫面: SCM 入口 (Page 72)

* **UI**：一個儀表板 (Dashboard) 佈局。
* **功能**：*必須* 包含四個主要功能區塊 (以大圖標按鈕呈現)：
    1.  **詢報價作業**
    2.  **採購委外作業**
    3.  **出貨作業**
    4.  **帳務作業**

---

## 6.0 WMS 倉儲管理系統 (手腳)

* **來源**：Page 73-77
* **核心**：這是一個手持 PDA (或手機) 的 Next.js PWA 應用。
* **核心流程 (Next.js App)**：*必須* 遵照 Page 74 (`智慧倉儲管理系統(WMS)架構`) 的流程。

### 6.1 畫面: WMS 手持設備主選單 (Page 74)

* **UI**：一個觸控式的主選單。
* **功能**：*必須* 包含以下按鈕，每個按鈕對應一個功能畫面：
    1.  `收料作業` (廠商送料)
    2.  `QC 檢驗`
    3.  `理貨上櫃` (驗收入庫)
    4.  `完工入庫` (生產入庫)
    5.  `生產撿料`
    6.  `出貨撿料`
    7.  `廠庫調撥`

### 6.2 畫面: WMS 後台設定 (Page 75)

* **UI**：Web 介面 (Next.js)。
* **功能**：
    * `廠區&儲位條碼設計`：定義倉儲佈局 (e.g., A-01-01) 並產生條碼。
    * `採購收料標籤設計`：設計收料時要列印的物料標籤。
    * `成品標籤設計`：設計完工入庫時要列印的成品標籤。
    * `廠區 AP 布置&測試`：(Page 76) 顯示 WiFi 訊號地圖。

### 6.3 效益 (KPIs)

* **目標**：(Page 77) 系統 *必須* 確保庫存即時正確性 > 99%。

---

## 7.0 IoT & BI 戰情室 (感官)

* **來源**：Page 53-68
* **系統架構 (System Design)**：*必須* 遵照 Page 59 (`金屬製品業數位優化轉型方案`)。
* **核心 (n8n + Supabase)**：
    1.  `(Sensor/機連)`：(n8n) 模擬資料採集。
    2.  `(Gateway)`：(n8n) 處理資料並 (Insert) 寫入 Supabase `iot_logs` 資料表。
    3.  `(Private Cloud)`：(Supabase) 儲存 `iot_logs`。
    4.  `(UeAl 工廠可視化...)`：(Next.js) 訂閱 (subscribe) Supabase Realtime 或定時 (poll) `iot_logs` 資料表，並渲染 BI 儀表板。

### 7.1 畫面: BI 儀表板 (Next.js)

#### 7.1.1 畫面: 工廠可視化 Kanban (Page 59, 68)

* **UI**：**高對比/深色主題**。
* **組件**：*必須* 包含 `Gauge Chart` (e.g., "100%"), `KPI Card` (e.g., "436", "35"), `Bar Chart`。
* **樣式**：*必須* 嚴格複製 Page 59 右上角的儀表板佈局和顏色。

#### 7.1.2 畫面: 高階主管應用看板 (Page 66)

* **UI**：**高對比/深色主題**，Tiled Grid 佈局。
* **組件**：
    * 頂部 `KPI Card` 區 (運轉, 異常, 停機, 斷訊)。
    * 中部 `Bar Chart` 區 (各區稼動率)。
    * 底部 `Data Grid` 區 (機台日報表)。
* **功能**：*必須* 實現「**下鑽 (Drill-Down)**」。例如：點擊 `03區` 的 Bar Chart，*必須* 跳轉到 `(辦公室)看板-各區機台現況查詢` (Page 66 中間圖)。再點擊 `133` 號機台，*必須* 跳轉到 `(辦公室)看板-單一機台現況查詢` (Page 66 右下圖)。

#### 7.1.3 畫面: 現場輪播看板 (Page 67)

* **UI**：**高對比/深色主題**。
* **功能**：*必須* 實現自動輪播 (Carousel)。
* **視圖 1 (機台總覽)**：(Page 67 上圖) `Status Grid` 顯示 `第03區` 所有機台 (127-150) 及其狀態顏色。
* **視圖 2 (效率總覽)**：(Page 67 中圖) 顯示 `第03區` 的總體效率 (e.g., "90%")。
* **視圖 3 (異常提醒)**：(Page 67 下圖) **[高優先級]** 當機台異常時，*必須* 顯示一個全螢幕的紅色警示，包含「機台號碼」(150) 和「異常原因」(手動停機)。

---

## 8.0 RPA 流程機器人 (自動化)

### 8.1 📍 流程: 採購收料 QR Code 應用 (n8n Workflow)

* **來源**：Page 79
* **核心指令**：*必須* 嚴格遵照 Page 79 的流程圖，使用 n8n 實現以下自動化。

* **[Actor 1: 供應商 (手動)]**
    1.  從其 ERP/SCM 匯出 `出貨單.pdf` (送貨明細)。
    2.  `[Email]` 將此 `pdf` 作為附件，寄送到一個指定的 n8n Webhook / GMail 信箱。

* **[Actor 2: n8n (自動)]**
    1.  **[Trigger: GMail/IMAP]** 監聽到新郵件 (或 Webhook 觸發)。
    2.  **[Step: Read PDF]** 下載並解析 `pdf` 附件，提取「送貨明細」 (料號, 數量)。
    3.  **[Step: Supabase Query]** `[自動執行]` 呼叫 Supabase API，查詢 `PO` (採購單) 資料表，比對「送貨明細」與「採購單」是否相符。
    4.  **[Step: IF Node]** 進行邏輯判斷：
        * **[IF (N) - 失敗]**：資料不符 (e.g., 數量超過)。
            * **[Step: Send Mail]** `[自動執行]` 回傳一封「錯誤通知」郵件給供應商 (`錯誤訊通知修正`)。
        * **[IF (Y) - 成功]**：資料相符。
            * **[Step: Supabase Insert]** `[自動執行]` 將「送貨明細」寫入 Supabase 的 `Incoming_Shipments` (待收料) 資料表，狀態為「待收貨」。
            * **[Step: Generate QR Code]** `[自動執行]` 產生一個 QR Code，其內容為 `Incoming_Shipments` 的唯一 ID (e.g., `shipment_id_123`)。
            * **[Step: Generate PDF]** `[自動執行]` 產生一份新的 `QRCod e.pdf`，包含該 QR Code 和送貨明細。
            * **[Step: Send Mail]** `[自動執行]` `報表回傳`，將此 `QRCod e.pdf` 郵件回傳給供應商。

* **[Actor 3: 供應商 (送貨司機 - 手動)]**
    1.  `[送貨作業]` 司機攜帶 `QRCod e.pdf` (可為紙本或手機畫面) 到達收料碼頭。

* **[Actor 4: 收料人員 (Next.js PWA App)]**
    1.  **[Manual]** 倉管人員打開 WMS 手持設備 App (見 6.1)。
    2.  **[Manual]** `[③ 掃描]` 掃描司機出示的 `QR Code`。
    3.  **[App Logic: Supabase Query]** App 根據 `shipment_id_123`，從 `Incoming_Shipments` 資料表反向查詢並帶出所有「送貨明細」。
    4.  **[Manual]** 倉管人員核對實物與 App 畫面資料無誤後，點擊 `[收料單]` 確認按鈕。
    5.  **[App Logic: Supabase Update]** `[直接入庫]` App 更新 `Incoming_Shipments` 狀態為「已收貨」，並觸發 Supabase Function 將庫存寫入 `Inventory` (庫存) 主資料表。
    6.  **[App Logic: Print]** `[列印標籤]` App 觸發標籤印表機，列印「物料 Barcode」 (Page 79 右下角)，用於貼在物料上並執行「理貨上櫃」 (6.1)。